<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Github 热门项目</title>
    <link rel="stylesheet" href="../css/font-awesome.min.css">
</head>
<body>

    <div id=container>

    </div>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <!-- babel是解析JSX必备的库 -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src = "https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/babel">
       class Header extends React.Component {
       
               
           
            handleAll=()=>{
            const w=window.open('about:blank');
            w.location.href="../index.html"
            }
            handleJavaScript=()=>{
            const w=window.open('about:blank');
            w.location.href="js.html"
            }
            handleRuby=()=>{
            const w=window.open('about:blank');
            w.location.href="ruby.html"
            }
            handleJava=()=>{
            const w=window.open('about:blank');
            w.location.href="java.html"
            }
            handleCSS=()=>{
            const w=window.open('about:blank');
            w.location.href="css.html"
            }
          render () {
               return <div style={{display: 'flex', justifyContent: 'center'}}>
                     <div style={{marginRight: '15px'}} onClick={this.handleAll}>All</div>
                     <div style={{marginRight: '15px', color: 'red'}} onClick={this.handleJavaScript}>JavaScript</div>
                     <div style={{marginRight: '15px'}} onClick={this.handleRuby}>Ruby</div>
                     <div style={{marginRight: '15px'}} onClick={this.handleJava}>Java</div>
                     <div style={{marginRight: '15px'}} onClick={this.handleCSS}>CSS</div>
               </div>
               
           }
           
       }

       class RepoList extends React.Component {
           constructor(props) {
               super(props)
               this.state = {
                   repos: []
                   };
           }
           
           async componentDidMount () {
               const res = await axios.get('https://api.github.com/search/repositories?q=stars:%3E1+language:javascript&sort=stars&order=desc&type=Repositories');
               console.log('res', res.data)
               this.setState({
                   repos: res.data.items
               });
           }
          
           render () {
              
                const list = this.state.repos.map((item, key) =>
                 <li style={{backgroundColor: '#e5e5e5', width: '200px',
                     marginTop: '20px',
                     display: 'flex',
                     flexDirection: 'row-reverse'}} key={item.id}>
                
                     <div style={{width: '200px',}}>
                        <h2 style={{display: 'flex', justifyContent: 'center'}}># {key+1}</h2>
                        <div style={{display: 'flex', justifyContent: 'center'}}>
                            <img src={item.owner.avatar_url} alt=""  style={{width: '100px'}}/>
                        </div>   
                        <h3 style={{display: 'flex', justifyContent: 'center'}}>{item.owner.login}</h3>
                        <div style={{display: 'flex', justifyContent: 'flex-end'}}>
                          <div style={{width: '180px'}}>
                            <p style={{marginLeft: '2px', fontSize: '14px'}}>  <i className="fa fa-user" style={{color: "orange"}} aria-hidden="true"></i>  {item.owner.login}</p>
                            <p style={{fontSize: '14px'}}><i className="fa fa-star" style={{color: "yellow"}} aria-hidden="true"></i> {item.watchers} stars</p>
                            <p style={{marginLeft: '3px', fontSize: '14px'}}>  <i className="fa fa-code-fork" style={{color: "blue",fontSize: '15px'}} aria-hidden="true"></i>  {item.forks} forks</p>
                            <p style={{fontSize: '13px'}}><i className="fa fa-exclamation-triangle" style={{color: "pink"}} aria-hidden="true"></i>  {item.open_issues} open issues</p>
                          </div>
                        </div>
                    </div>
               </li>
                );
                console.log(list)
                return <ol  style={{
                    display: 'flex',
                    flexWrap: 'wrap',
                    justifyContent: 'space-around',
                    paddingRight: '40px'
                 }}>
                         
                            {list}
                       
                    </ol>
           }
       }
       class App extends React.Component {
           render () {
               return <div>
                   <Header/>
                  
                  <RepoList/>
                  </div>;
           }
       }
       ReactDOM.render(
           <App />,
           document.getElementById('container')
       )
    </script>
</body>
</html>

